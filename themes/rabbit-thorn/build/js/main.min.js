!function(e){"use strict";e(".wpcf7-submit").addClass("btn md");var a,n=window.THE_TATTOOIST||{};n.pageLoader=function(){setTimeout((function(){e(".content-loader").fadeOut(800,(function(){e(this).remove()})),e("#video-background").trigger("play")}),400)},n.magnificPopup=function(){e(".zoom").magnificPopup({type:"image"}),e(".btn-popup").magnificPopup({type:"inline"})},n.selectReplacer=function(){e("select").each((function(){var a=e(this),n=e("<ul></ul>").addClass("select-replacer"),t=e('<input type="hidden" name="'+a.attr("name")+'" value="'+a.val()+'">');a.after(n),n.after(t),a.children("option").each((function(){var a=e(this),t=e('<li data-value="'+a.val()+'">'+a.text()+"</li>");null!=a.attr("class")&&t.addClass(a.attr("class")),n.append(t)})),n.children("li").not(":first").hide(),n.children("li").on("click",(function(){var a=e(this),o=a.data("value");a.prependTo(n.toggleClass("open")).nextAll().toggle(),t.val(o),e(".hidden-field").removeClass("show").find("input").removeClass("required"),e("#"+a.attr("class")).addClass("show").find("input").addClass("required")})),a.remove(),e(document).on("click",(function(a){e("form label").find(a.target).length||n.removeClass("open").children("li").not(":first").hide()}))}))},n.toggle=function(){e(".open .content-toggle").show(),e(".title-toggle").on("click",(function(a){a.preventDefault();var n=e(this),t=n.parent(),o=n.next(),i=n.parents(".accordion");i.length>0?(i.find(".content-toggle").slideUp("normal",(function(){e(this).parent().removeClass("open")})),n.next().is(":hidden")&&o.slideDown("normal",(function(){t.addClass("open")}))):o.slideToggle("normal",(function(){t.toggleClass("open")}))}))},n.tabs=function(){e(".title-tab:first-child").addClass("selected-tab"),e(".title-tab").on("click",(function(a){a.preventDefault();var n=e(this),t=n.parents(".tabs"),o=n.find("a").attr("href");n.hasClass("selected-tab")||(t.find(".tab").hide().removeClass("open"),t.find(".title-tab").removeClass("selected-tab"),n.addClass("selected-tab"),e(o).fadeIn().addClass("open"))}))},n.portfolio={init:function(){this.layout(),this.filters(),this.infoItems()},layout:function(){e(".works").imagesLoaded((function(){e(".works").isotope()}))},filters:function(){e(".filters").on("click","a",(function(a){a.preventDefault();var n=e(this),t=n.attr("data-filter");e(".filters a").removeClass("light"),n.addClass("light"),e(".works").isotope({filter:t})}))},infoItems:function(){e(".info-link").on("click",(function(a){a.preventDefault();var n=e(this).parents(".work-thumb").next(".info-work");n.length>0&&n.slideToggle(200,(function(){e(this).parents(".work").toggleClass("opened"),e(".works").isotope("layout")}))}))}},n.scrollToSection=function(){e('.one-page #nav-menu a[href^="#"]').on("click",(function(a){a.preventDefault();var n=this.hash,t=e(n);e(this).parent().addClass("selected"),e("html, body").stop().animate({scrollTop:t.offset().top-79},900,"swing",(function(){window.location.hash=n.replace(/^#/,"#!")})),e("body").removeClass("open"),e("#nav-menu").find("li").removeClass("show")}))},n.scrollHighlight=function(){var a=e(window).scrollTop();e("body").hasClass("one-page")&&(a>=200?e(".section").each((function(){var n=e('#nav-menu a[href="#'+e(this).attr("id")+'"');n.length&&e(this).position().top<=a+80&&(e("#nav-menu li").removeClass("selected"),n.parent().addClass("selected"))})):e("#nav-menu li").removeClass("selected"))},n.mobileMenu={init:function(){this.toggleMenu(),this.addClassParent(),this.addRemoveClasses()},toggleMenu:function(){var a=this,n=e("body");e("#nav-toggle").click((function(t){t.preventDefault(),n.hasClass("open")?(n.removeClass("open"),e("#nav-menu").find("li").removeClass("show")):(n.addClass("open"),a.showSubmenu())}))},addClassParent:function(){e("#nav-menu").find("li > ul").each((function(){e(this).parent().addClass("parent")}))},addRemoveClasses:function(){var a=e("#nav-menu");e(window).width()<992?a.addClass("mobile"):(e("body").removeClass("open"),a.removeClass("mobile").find("li").removeClass("show"))},showSubmenu:function(){e("#nav-menu").find("a").each((function(){var a=e(this);a.next("ul").length&&a.one("click",(function(a){a.preventDefault(),e(this).parent().addClass("show")}))}))}},n.stickyMenu=function(){e(window).scrollTop()>50?e("body").addClass("sticky"):e("body").removeClass("sticky")},n.contactsBar=function(){e(window).scrollTop()+e(window).height()>e("footer").offset().top?e("#contacts-bar").fadeOut("fast"):e("#contacts-bar").fadeIn("fast")},n.backgrounds=function(){e.each(config.backgrouns,(function(a,n){var t=e(a),o=e('<div class="bg-overlay"></div>');null!=n.img&&t.addClass("bg").css("background-image","url("+n.img+")").prepend(o),null==n.overlay||n.disableOverlay||t.find(".bg-overlay").remove(),null!=n.overlayOpacity&&t.find(".bg-overlay").css("opacity",n.overlayOpacity),null!=n.overlayColor&&t.find(".bg-overlay").css("background-color",n.overlayColor),null!=n.pattern&&n.pattern&&t.addClass("pattern"),null!=n.position&&t.css("background-position",n.position),null!=n.bgCover&&t.css("background-size",n.bgCover),null!=n.parallax&&n.parallax&&t.addClass("plx")}))},n.parallax=function(){e(".plx").each((function(){e(this).parallax("50%",.5)}))},n.flexslider=function(){e(".flexslider").each((function(){var a=e(this),n=void 0!==a.data("animation")?a.data("animation"):"slide",t=void 0!==a.data("autoplay")&&a.data("autoplay");a.flexslider({slideshow:t,pauseOnHover:!0,animation:n,prevText:"",nextText:""})}))},n.youtubeBg=function(){var a=e(".youtube-player");a.mb_YTPlayer(),e("#toggle-volume").click((function(n){n.preventDefault();var t=e(this).find("i");t.hasClass("fa-volume-off")?t.removeClass("fa fa-volume-off").addClass("fa fa-volume-up"):t.removeClass("fa fa-volume-up").addClass("fa fa-volume-off"),a.toggleVolume()}))},n.forms=function(){e("form").append('<div class="form-msg" style="display:none"><span></span><a href="#"></a></div>'),e("form").submit((function(a){a.preventDefault();var n,t=e(this),o=!1,i=config.formMessages,s=t.find(".form-msg"),l=s.find("span"),r=t.find('input[name="email"]').val(),c=t.serialize();return s.removeClass("fail success"),l.text(""),t.find(".required").each((function(){(""===e.trim(e(this).val())||e(this).is(":checkbox:not(:checked)"))&&(o=!0)})),o?(l.text(i.emptyFields).parent().addClass("fail").fadeIn("fast"),!1):(n=r,new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i).test(n)?(t.find(".submit").after('<span class="form-loader" />'),void e.post(t.attr("action"),c,(function(e){"success"==e?(l.text(i.sent),t.trigger("reset")):l.text(i.fail)})).fail((function(){l.text(i.fail)})).always((function(e){t.find(".form-loader").remove(),s.addClass(e).fadeIn("fast")}))):(l.text(i.failEmail).parent().addClass("fail").fadeIn("fast"),!1))})),e(document).on("click",".form-msg a",(function(){return e(this).parent().fadeOut(),e(".form-msg").hasClass("success")&&e.magnificPopup.close(),!1}))},n.instagram={globalObjs:{instagramBar:e(".instagram-bar"),cacheResult:[]},init:function(){this.globalObjs.instagramBar.hasClass("feed-bg")&&this.getPicsUrls()},getPics:function(a){var n=this.globalObjs;n.instagramBar.prepend('<span class="pics-container"></span>');var t=n.instagramBar.find(".pics-container"),o=n.instagramBar.outerWidth(),i=n.instagramBar.outerHeight(),s=parseInt(o/i);o%i>0&&s++,t.css("width",o*s).empty(),e.each(a,(function(e,a){e<s&&t.append('<img src="'+a+'" alt="">')})),t.imagesLoaded((function(){t.fadeIn()}))},getPicsUrls:function(){var a=this,n=a.globalObjs;e.ajax({url:"https://www.instagram.com/rabbitandthorn/?__a=1"}).done((function(e){const t=e.graphql.user.edge_owner_to_timeline_media.edges.map(e=>e.node.display_url);n.cacheResult=t,a.getPics(n.cacheResult)}))},delayFunction:(a=0,function(e,n){clearTimeout(a),a=setTimeout(e,n)}),reload:function(){var a=this;e(".pics-container").fadeOut("400",(function(){e(this).remove()})),a.delayFunction((function(){a.getPics(a.globalObjs.cacheResult)}),1e3)}},n.goToSection=function(){var a=window.location.hash.replace(/^#!/,"#");e('.one-page #nav-menu a[href="'+a+'"]').trigger("click")},e(document).ready((function(){n.magnificPopup(),n.selectReplacer(),n.toggle(),n.tabs(),n.portfolio.init(),n.scrollToSection(),n.mobileMenu.init(),n.forms(),n.backgrounds(),n.parallax(),n.youtubeBg()})),e(window).load((function(){n.pageLoader(),n.flexslider(),n.instagram.init()})),e(window).resize((function(){n.portfolio.layout(),n.mobileMenu.addRemoveClasses(),/Mobi/.test(navigator.userAgent)||n.instagram.reload()})),e(window).on("orientationchange",(function(e){n.instagram.reload()})),e(window).scroll((function(){n.stickyMenu(),n.scrollHighlight(),n.contactsBar()}))}(jQuery);